<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ribdex Global Concept Real Estate</title>
    <link
      rel="shortcut icon"
      href="./src/icons/RIBDEX.svg"
      type="image/x-icon"
    />
    <link href="/src/css/output.css" rel="stylesheet" />
    <script src="./src/js/script.js" defer></script>
  </head>
  <body
    class="max-w-screen-xlh-[144440px] bg-green-50 relative overflow-x-hidden"
  >
    <!-- Header/nav section -->
    <header class="z-[19999999] bg-white py-[19px] fixed top-0 right-0 left-0">
      <!-- logo -->
      <div class="container px-5 flex mx-auto justify-between items-center">
        <a href="./index.html">
          <div class="flex justify-start items-center gap-2.5">
            <img
              class="w-10 md:w-20 relative"
              src="/src/icons/RIBDEX.svg"
              alt="logo"
            />
          </div>
        </a>

        <!-- desktop nav menu -->
        <nav>
          <div class="hidden md:flex justify-start items-center gap-[17px]">
            <div class="justify-start items-end gap-[10px] flex">
              <a
                href="./index.html#"
                class="text-[#125505] hover:text-[#61C93A] text-xl font-bold font-head uppercase leading-[18px]"
              >
                home
              </a>
              <a
                href="./properties.html#residence"
                class="text-[#125505] hover:text-[#61C93A] text-xl font-bold font-head uppercase leading-[18px]"
              >
                residence
              </a>
              <a
                href="./properties.html#land"
                class="text-[#125505] hover:text-[#61C93A] text-xl font-bold font-head uppercase leading-[18px]"
              >
                land
              </a>
              <a
                href="./index.html#contact"
                class="text-[#125505] hover:text-[#61C93A] text-xl font-bold font-head uppercase leading-[18px]"
              >
                contact
              </a>
            </div>
          </div>

          <!-- hamburger menu -->
          <div id="hamburger-btn" class="md:hidden cursor-pointer">
            <img src="./src/icons/Frame 38menu.svg" alt="menu-icon" />
          </div>
        </nav>
      </div>

      <!-- mobile -->
      <div
        id="mobile-menu"
        class="absolute bg-white bg-opacity-70 top-full left-0 right-0 h-0 overflow-x-hidden flex flex-col justify-start items-start transition-all ease-in-out duration-[10ms]"
        style="backdrop-filter: blur(10px)"
      >
        <div class="justify-start items-start flex flex-col">
          <a
            href="./index.html#"
            class="hover:bg-[#61C93A] text-xl font-bold font-head uppercase leading-[18px] px-[20px] py-[16px] w-[100vw] text-[#125505]"
          >
            home
          </a>
          <a
            href="./properties.html#residence"
            class="hover:bg-[#61C93A] text-xl font-bold font-head uppercase leading-[18px] px-[20px] py-[16px] w-[100vw] text-[#125505]"
          >
            residence
          </a>
          <a
            href="./properties.html#land"
            class="hover:bg-[#61C93A] text-xl font-bold font-head uppercase leading-[18px] px-[20px] py-[16px] w-[100vw] text-[#125505]"
          >
            land
          </a>
          <a
            href="./index.html#contact"
            class="hover:bg-[#61C93A] text-xl font-bold font-head uppercase leading-[18px] px-[20px] py-[16px] w-[100vw] text-[#125505]"
          >
            contact
          </a>
        </div>
      </div>
    </header>

    <!-- main content -->
    <main
      class="container mx-auto pt-[200px] gap-[30px] md:gap[50px] flex flex-col justify-between md:items-start md:flex-row"
    >
      <article class="main-article">
        
      </article>
    </main>
    
    <!-- FORMS TO APPLY FOR THE PRPOPERTY -->
     <div class="container mx-auto">
       <div class="max-w-[500px] mx-auto px-5">
         <form
         id="appForm"
         class="w-full flex gap-[15px] flex-col items-start justify-between"
       >
         <div class="w-full text-center font-head font-bold text-[24px]">Make your Reservation OR Visitation Request</div>
         <input
           required
           type="text"
           name="full-name"
           id="full-name"
           class="w-full bg-white px-[20px] py-[10px] placeholder-green-700 text-xl font-medium font-head"
           placeholder="Enter your Full Name"
         />
         <input
           required
           type="text"
           name="email"
           id="client-email"
           class="w-full bg-white px-[20px] py-[10px] placeholder-green-700 text-xl font-medium font-head"
           placeholder="Enter your Email"
         />
         <input
           required
           type="text"
           name="phone-number"
           id="phone-number"
           class="w-full bg-white px-[20px] py-[10px] placeholder-green-700 text-xl font-medium font-head"
           placeholder="Enter your Phone Number"
         />
         <input
           name="property-title"
           id="property-title"
           class="hidden"
         />
         <select
           class="w-full md:w-[260px] bg-white px-[20px] py-[10px] placeholder-green-700 text-xl font-medium font-head"
           name="form-type"
           id="form-type"
         >
           <option value="">Select type Application</option>
           <option value="reservation">Make a reservation/am interested</option>
           <option value="visit">A visit to the property</option>
         </select>
         <button
           type="button"
           id="propfrm"
           class="py-4 flex px-5 bg-orange-600 text-white text-xl font-bold font-head uppercase leading-[18px]"
         >
           Submit Form
         </button>
       </form>
       </div>

       
       <!-- dont show contact -->
       <div
       id="contact"
       class="container mx-auto px-[10px] md:px-[105px] pt-[183px]"
     >
       <h1
         class="text-[#125505] text-center text-[30px] md:text-[54px] font-bold font-head uppercase leading-[48.60px]"
       >
         contact us
       </h1>
   
       <div
         class="w-full flex pt-7 pb-[50px] gap-8 flex-col lg:flex-row justify-between items-center"
       >
         <div class="w-full md:max-w-[500px] h-[300px] md:h-[403px]">
           <img
             style="object-position: center; object-fit: cover"
             class="h-full object-cover object-center w-full"
             src="./src/images/image (3).webp"
             alt="customer service"
           />
         </div>
         <form
           id="contact-form"
           method="post"
           action="https://script.google.com/macros/s/AKfycbwnH2Hupvrb8TmZruzbjxMHW5uxx-VijpLL4hpipOSsiOGxy_vmr35W8vzngPC5j-_N/exec"
           class="w-full md:w-[530px] flex gap-[15px] flex-col items-start"
         >
           <input
             required
             type="text"
             name="full_name"
             class="w-full bg-transparent px-[20px] py-[10px] border-l-2 border-b-2 border-[#125505] placeholder-green-700 text-xl font-medium font-head"
             placeholder="Name:"
           />
           <input
             required
             type="email"
             name="email_address"
             class="w-full bg-transparent px-[20px] py-[10px] border-l-2 border-b-2 border-[#125505] placeholder-green-700 text-xl font-medium font-head"
             placeholder="Email Address:"
           />
           <input
             required
             type="number"
             name="phone_number"
             class="w-full bg-transparent px-[20px] py-[10px] border-l-2 border-b-2 border-[#125505] placeholder-green-700 text-xl font-medium font-head"
             placeholder="Phone Number:"
           />
           <textarea
             required
             name="message"
             id="message"
             rows="4"
             class="w-full bg-transparent px-[20px] py-[10px] border-l-2 border-b-2 border-[#125505] placeholder-green-700 text-xl font-medium font-head"
             placeholder="Message:"
           ></textarea>
           <button
             type="submit"
             class="py-4 px-5 bg-orange-600 text-white text-xl font-bold font-head uppercase leading-[18px]"
           >
             submit
           </button>
         </form>
       </div>
     </div>
    <!-- footer -->
    <div class="w-full bg-[#26921E] py-[32px]">
      <div
        class="container mx-auto px-[10px] md:px-[105px] flex justify-between items-start flex-wrap gap-5"
      >
        <div class="w-[300px]" style="flex: 1 1 auto">
          <h4
            class="pb-[30px] text-white text-[25px] font-bold font-head uppercase leading-snug"
          >
            Ribdex global concept
          </h4>
          <div class="pb-[18px] w-full flex justify-between items-start">
            <bsxvhgc
              class="text-white text-base md:text-basemd font-bold font-head uppercase leading-[18px]"
              >Address:</b
            >
            <p
              class="w-[235px] text-white text-base md:text-basemd font-light font-head leading-[18px]"
            >
              4, Ayanboye street, Off Faramobi Road, Anthony Lagos, Lagos,
              Nigeria
            </p>
          </div>

          <div class="pb-[18px] w-full flex justify-between items-start">
            <b
              class="text-white text-base md:text-basemd font-bold font-head uppercase leading-[18px]"
              >tel/whatsapp:</b
            >
            <p
              class="w-[235px] text-white text-base md:text-basemd font-light font-head leading-[18px]"
            >
              +2348124232695, +2347063022031
            </p>
          </div>

          <div class="pb-[18px] w-full flex justify-between items-start">
            <b
              class="text-white text-base md:text-basemd font-bold font-head uppercase leading-[18px]"
              >Email:</b
            >
            <p
              class="w-[235px] text-white text-base md:text-basemd font-light font-head leading-[18px]"
            >
              info@ribdexglobalconcept.com
            </p>
          </div>
        </div>

        <div class="w-[300px]" style="flex: 1 1 auto">
          <div
            class="text-white text-xl font-bold font-head uppercase leading-[18px]"
          >
            Quick Links:
          </div>

          <ul
            class="justify-start items-start pt-[20px] text-white font-head font-light gap-2.5 underline flex-col inline-flex pl-7 text-base md:text-basemd"
            style="list-style-type: disc"
          >
            <a href="./index.htmltravel"><li>Travel</li></a>
            <a href="./index.htmlwhyus"><li>Why Choose Us?</li></a>
            <a href="./faqs"><li>FAQs</li></a>
            <a href="./index.htmlhow_it_works"><li>How It Works</li></a>
          </ul>
        </div>

        <div class="w-[300px] flex flex-col gap-5" style="flex: 1 1 auto">
          <div class="flex w-full flex-col gap-4">
            <div
              class="text-white text-xl font-bold font-head uppercase leading-[18px]"
            >
              newsletter
            </div>

            <div
              class="text-white font-head text-base font-light md:text-basemd"
            >
              Stay informed! Subscribe to our newsletter for exclusive offers,
              travel tips, and educational news.
            </div>

            <!-- subscribe button -->
            <a
              href="http://wa.me/8124232695"
              target="_blank"
              rel="noopener noreferrer"
            >
              <button
                class="py-4 px-5 bg-orange-600 text-white text-xl font-bold font-head uppercase leading-[18px]"
              >
                subscribe now
              </button>
            </a>
          </div>

          <div class="flex w-full flex-col gap-4">
            <div
              class="text-white text-xl font-bold font-head uppercase leading-[18px]"
            >
              partner with us
            </div>

            <div
              class="text-white font-head text-base font-light md:text-basemd"
            >
              Are you an academic institution, travel industry leader, or
              consultancy expert? Explore partnership opportunities with Ribdex
              Global Concept.
            </div>

            <!-- become partner button -->
            <a href="./partnership-form.html">
              <button
                class="py-4 px-5 bg-orange-600 text-white text-xl font-bold font-head uppercase leading-[18px]"
              >
                become a partner
              </button>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- copyright -->
    <div class="w-full bg-[#125505] py-[20px]">
      <div
        class="container mx-auto px-[10px] md:px-[105px] flex justify-between items-center"
      >
        <span
          class="text-white text-base md:text-xl font-light font-head uppercase"
          >© copyright -
          <p class="copyright-year inline">2023</p></span
        >
        <span
          class="text-white text-base md:text-xl font-light font-head uppercase"
          >Designed/Developed By:
          <a href="https://www.facebook.com/Da.EmperorD/" target="_blank"
            >Emdes Solutions</a
          ></span
        >
        <div class="flex items-center gap-[10px]">
          <a href="/facebook" target="_blank" rel="noopener noreferrer">
            <img
              src="./src/icons/Group 30facbook.svg"
              alt="facebook"
              class="w-[20px] md:w-[30px]"
            />
          </a>
          <a href="/twitter" target="_blank" rel="noopener noreferrer">
            <img
              src="./src/icons/Group 31Xtwitter.svg"
              alt="X"
              class="w-[20px] md:w-[30px]"
            />
          </a>
          <a href="/instagram" target="_blank" rel="noopener noreferrer">
            <img
              src="./src/icons/Group 32instagram.svg"
              alt="instagram"
              class="w-[20px] md:w-[30px]"
            />
          </a>
          <a
            href="http://linkedin.com/ribdex"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img
              src="./src/icons/Group 33linkedin.svg"
              alt="linkedin"
              class="w-[20px] md:w-[30px]"
            />
          </a>
        </div>
      </div>
    </div>
  </body>
  <style>
    @media (min-width: 768px) {
      .hero-content {
        padding-top: 240px;
        padding-bottom: 194px;
      }

      .headline {
        font-size: 55px;
        line-height: 98px;
        padding-bottom: 30px;
      }

      .search-form {
        flex-direction: row;
      }

      .location-input {
        width: 680px;
      }

      .property-select {
        width: 260px;
      }

      .desktop-search {
        display: flex;
      }

      .mobile-search {
        display: none;
      }
    }

    .main-article {
      margin-bottom: 3rem;
      width: 100%;
    }

    .main-article__figure img {
      width: 100%;
      height: 600px;
      object-fit: cover;
      object-position: center;
    }

    .container--narrow {
      max-width: 65rem;
    }

    .prop-hero {
      position: relative;
    }

    .headline {
      color: white;
      font-size: 25px;
      font-weight: bold;
      text-transform: uppercase;
      padding-bottom: 10px;
      font-family: "Saira Condensed";
      line-height: 25px;
    }

    .prop-title {
      position: absolute;
      bottom: 50px;
      font-family: "Saira Condensed";
      left: 30px;
      text-shadow: 5px 5px 10px black;
    }

    /* short info for youtube and other information about the land */
    .short-info {
      max-width: 800px;
      width: 100%;
      margin: 0 auto;
    }

    .video-container {
      width: 100%;
      max-width: 1000px;
      height: 204px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container-s {
  max-width: 1200px;
  margin: 0 auto;
  padding: 50px 0;
  display: flex;
  flex-direction: column;
  gap: 30px;
}

    @media screen and (min-width: 768px) {
      .video-container {
        height: 450px;
      }
    }

    .main-article__figure img {
      width: 100%;
      height: 600px;
      object-fit: cover;
      object-position: center;
    }

    .property-location,
    .property-info {
      display: flex;
      align-items: center;
      font-size: 14px;
      gap: 10px;
    }

    .property-info {
      justify-content: space-between;
    }

    .explore-btn {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }

    .explore-now {
      padding: 16px 20px;
      background-color: #f97316;
      color: white;
      font-size: 18px;
      font-weight: bold;
      text-transform: uppercase;
      cursor: pointer;
      border: none;
      outline: none;
    }

    .heading,
    .explore-btn,
    .property-title {
      font-family: "Saira Condensed";
    }
  </style>
  <script>
const urlParams = new URLSearchParams(window.location.search);
const type = urlParams.get('type');
const title = urlParams.get('title');
const propTitForm = document.getElementById('property-title')

console.log("Type:", type);
console.log("Title:", title);

// Example usage: Displaying the values in the HTML
document.addEventListener('DOMContentLoaded', () => {

  if (title) { // Check if the title parameter exists
    document.title = title;
  } else {
    document.title = "Ribdex Properties"; // Set a default title if the parameter is missing
  }
  
  const localStorePropData = JSON.parse(localStorage.getItem("propDataStore"))
    dispNewProp(localStorePropData[type][title])

});

  function dispNewProp(data){
    const formattedPrice = formatNumberWithCommas(data.priceNaira); // Format the price
    const detailData = data.propertyDetails;
    
    let propUnit;
    if(data.propertyType === "land") {
      propUnit = "sqm"
    } else {
      propUnit = "bedroom"
    }
    propTitForm.value = title;
    let descriptionWithBreaks = detailData.replace(/\n/g, '<br>') // change break line 
    descriptionWithBreaks = descriptionWithBreaks.replace(/\*(.*?)\*/g, '<b style="display: inline">$1</b>') // convert *text* to <b>text</b>
    descriptionWithBreaks = descriptionWithBreaks.replace(/\_(.*?)\_/g, '<i style="display: inline">$1</i>') // convert *text* to <i>text</i>
    document.querySelector("meta[name='description']").setAttribute("content", descriptionWithBreaks);
    document.querySelector("meta[property='og:title']").setAttribute("content", title);
    document.querySelector("meta[property='og:description']").setAttribute("content", descriptionWithBreaks);
    document.querySelector("meta[property='og:image']").setAttribute("content", data.propertyImage);
    document.querySelector(".main-article").innerHTML = `
    <div style="width: 90%; padding: 30px; background: white; margin: auto;">
    <div class="container-s container--narrow flow">
          <div class="prop-hero">
            <h1 class="headline prop-title">${title}</h1>
            <figure class="main-article__figure">
              <img src="${data.propertyImage}" alt="${title}" />
            </figure>
          </div>

          <div class="short-info">
            <div class="video-container">
              <iframe
                width="100%"
                height="100%"
                src="${data.videoLink}"
                title="YouTube video player"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                referrerpolicy="strict-origin-when-cross-origin"
                allowfullscreen
              >
              </iframe>
            </div>
            <span class="property-location" style="padding-top: 20px">
              <img src="./src/icons/location (2).svg" />${data.propertyLocation}
            </span>
            <div class="property-info">
              <span class="property-location"
                ><img src="./src/icons/price.svg" />₦${formattedPrice}</span
              >
              <span class="property-location"
                ><img src="./src/icons/bed.svg" class="w-[30px] h-[30px]" />${data.propertySize}${propUnit}</span
              >
            </div>
          </div>

          <p style="display: inline; width: 90%; margin: auto;"><button
              type="submit"
              class="py-4 flex px-5 bg-orange-600 text-white text-xl font-bold font-head uppercase leading-[18px]"
              style="cursor: none;"
            >
              Property Description
            </button> <br> ${descriptionWithBreaks}</p>
        </div>
        </div>`
  }

// format price to display with ',' - comma
function formatNumberWithCommas(number) {
  return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

  </script>
  <script type="module">
    // Import the Firebase modules (CDN-based approach)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
    import {
      getDatabase,
      ref,
      set,
    } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js";
    
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCWQ552it5NQwc7LCqlZ9LS2TPfYRv5S9w",
      authDomain: "real-ribdex-property.firebaseapp.com",
      databaseURL: "https://real-ribdex-property-default-rtdb.firebaseio.com",
      projectId: "real-ribdex-property",
      storageBucket: "real-ribdex-property.firebasestorage.app",
      messagingSenderId: "634531624880",
      appId: "1:634531624880:web:872297c7bfa67dd7150875",
    };
    
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    
    // Handle form submission
    const applyFormSubmitBtn = document.getElementById("propfrm")
    const appForm = document.getElementById("appForm")
    applyFormSubmitBtn.addEventListener("click", async (e)=>{
      e.preventDefault()
      console.log("clicked form")
    
      // Get form field values
      const clientName = document.getElementById("full-name").value;
      const clientEmail = document.getElementById("client-email").value;
      const clientPhone = document.getElementById("phone-number").value;
      const propertyApplyiedFor = title;
      const applicationType = document.getElementById("form-type").value;
      console.log("value got:", {
            clientName,
            clientEmail,
            clientPhone,
            propertyApplyiedFor,
            applicationType,
          })
    
    try {
      // Generate a unique key for the property
      const propertyKey = `${applicationType}/${propertyApplyiedFor}/${clientName}`;

      // Prepare the data object
      const propertyData = {
        clientName,
        clientEmail,
        clientPhone,
            propertyApplyiedFor,
            applicationType,
      };
      console.log("uploading")

      // Upload data to Firebase Realtime Database
      await set(ref(database, `form/${propertyKey}`), propertyData);
      console.log("uploaded")

      appForm.reset();
      alert("Form successfully submitted!");
    } catch (error) {
      console.error("Error uploading property: ", error);
      alert("Failed to submit. Please try again.");
    }
    })
</script>
</html>
